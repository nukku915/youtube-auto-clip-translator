# 制約条件・制限事項

## 1. 入力制約

### 動画

| 項目 | 制限 | 備考 |
|------|------|------|
| 最大動画長 | **2時間** | これを超える場合は警告表示 |
| 最大ファイルサイズ | **制限なし** | ディスク空き容量に依存 |
| 対応フォーマット | MP4, WebM, MKV | yt-dlpがダウンロードする形式 |
| 対応解像度 | 360p〜4K | 4K以上は処理時間が大幅増加 |

### URL

| 項目 | 制限 | 備考 |
|------|------|------|
| 対応プラットフォーム | YouTube | yt-dlp対応の他サービスは将来検討 |
| プレイリスト | **非対応（MVP）** | 単一動画のみ |
| ライブ配信 | **非対応** | アーカイブのみ対応 |
| 年齢制限動画 | **Cookie設定で対応** | 設定画面で案内 |
| 非公開動画 | **非対応** | 公開・限定公開のみ |

---

## 2. 言語対応

### 対応言語（7言語）

| 言語 | コード | 文字起こし | 翻訳元 | 翻訳先 |
|------|--------|-----------|--------|--------|
| 日本語 | ja | ✅ | ✅ | ✅ |
| 英語 | en | ✅ | ✅ | ✅ |
| 中国語（簡体） | zh | ✅ | ✅ | ✅ |
| 韓国語 | ko | ✅ | ✅ | ✅ |
| スペイン語 | es | ✅ | ✅ | ✅ |
| フランス語 | fr | ✅ | ✅ | ✅ |
| ドイツ語 | de | ✅ | ✅ | ✅ |

### 翻訳ペア

- 任意の対応言語間で翻訳可能
- 例: 日本語→英語、英語→中国語、スペイン語→日本語 など

### 制限事項

| 項目 | 制限 |
|------|------|
| 多言語混在 | 主要言語を自動検出、他はベストエフォート |
| RTL言語（アラビア語等） | **非対応（MVP）** |
| 方言・訛り | ベストエフォート（精度低下の可能性） |

---

## 3. 処理制約

### 同時処理

| 項目 | 制限 | 備考 |
|------|------|------|
| 同時プロジェクト数 | **1つ** | 順次処理のみ |
| バックグラウンド処理 | なし（MVP） | 将来対応検討 |

### オフラインモード

| 状態 | 動作 |
|------|------|
| Gemini API利用可 | Geminiで翻訳・タイトル生成 |
| Gemini API利用不可 | **Ollamaへフォールバック** |
| Ollama未起動 | 自動起動を試行 → 失敗時はエラー表示 |
| 両方利用不可 | 文字起こしまで実行、翻訳はスキップ |

### タイムアウト

| 処理 | タイムアウト | 備考 |
|------|-------------|------|
| 動画ダウンロード | 30分 | 大容量動画考慮 |
| 文字起こし | 動画長 × 3 | 長時間動画考慮 |
| 翻訳API呼び出し | 60秒/リクエスト | リトライあり |
| エンコード | 動画長 × 5 | 設定依存 |

---

## 4. 出力制約

### 動画

| 項目 | 制限 | 備考 |
|------|------|------|
| 出力形式 | MP4 | H.264/AAC |
| 最大解像度 | 元動画と同じ | ダウンスケール可能 |
| Shorts | 9:16、60秒以内 | YouTube Shorts仕様 |

### 字幕

| 項目 | 制限 | 備考 |
|------|------|------|
| 出力形式 | SRT, ASS, VTT | |
| 最大字幕数 | 制限なし | |
| 1字幕の最大文字数 | 40文字/行（日本語） | 自動改行 |

---

## 5. システム要件

### 最低要件

| 項目 | 要件 |
|------|------|
| OS | Windows 10、macOS 12、Ubuntu 22.04 |
| Python | 3.10以上 |
| RAM | 8GB |
| ディスク空き容量 | 10GB + 動画サイズ × 3 |

### 推奨要件

| 項目 | 要件 |
|------|------|
| RAM | 16GB以上 |
| GPU | NVIDIA RTX 3060以上 / Apple M1以上 |
| ディスク | SSD |

### GPU対応

| GPU | 対応状況 |
|-----|---------|
| NVIDIA (CUDA) | ✅ WhisperX高速化、NVENC対応 |
| Apple Silicon (MPS) | ✅ WhisperX対応 |
| AMD (ROCm) | ⚠️ 限定的 |
| Intel (QSV) | ✅ エンコードのみ |
| CPU-only | ✅ 動作（低速） |

---

## 6. API制約

### Gemini API

| 項目 | 制限 | 備考 |
|------|------|------|
| レート制限 | 60 RPM（無料枠） | 指数バックオフでリトライ |
| 最大入力トークン | 32K | 長文は分割 |
| 必須 | ❌ | Ollamaフォールバックあり |

### Ollama（ローカル）

| 項目 | 制限 | 備考 |
|------|------|------|
| 推奨モデル | gemma-2-jpn:2b | 約1.5GB |
| メモリ使用量 | 4GB以上推奨 | モデル依存 |
| 必須 | ❌ | Geminiがあれば不要 |

---

## 7. 既知の制限

### 文字起こし

| 制限 | 詳細 |
|------|------|
| BGMが大きい動画 | 精度低下 |
| 複数人同時発話 | 認識困難な場合あり |
| 専門用語 | 誤認識の可能性 |
| ささやき声 | 認識困難 |

### 翻訳

| 制限 | 詳細 |
|------|------|
| スラング・ネットミーム | 適切に訳せない場合あり |
| 文脈依存の訳 | 前後関係が途切れると精度低下 |
| 固有名詞 | 誤訳の可能性 |

### 動画編集

| 制限 | 詳細 |
|------|------|
| 可変フレームレート | 問題が発生する可能性 |
| 特殊コーデック | 再エンコード必須 |
| 4K以上 | 処理時間大幅増加 |

---

## 8. 将来の拡張予定

| 機能 | 優先度 | 備考 |
|------|--------|------|
| プレイリスト対応 | 中 | Phase 4 |
| 追加言語対応 | 低 | 需要に応じて |
| バックグラウンド処理 | 中 | Phase 4 |
| YouTube直接アップロード | 低 | API連携 |

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-19 | 初版作成 |

